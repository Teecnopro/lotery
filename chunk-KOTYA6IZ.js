import{c as Le,d as Ie,e as ke,f as Re,g as Ve,h as Ne}from"./chunk-2XS7DZYZ.js";import{b as y}from"./chunk-6E5G53ZK.js";import{a as Te}from"./chunk-7DLEL2I7.js";import{$a as we,A as J,C as K,D as Q,F as W,G as X,I as Y,Pa as pe,Sa as _e,Ta as ge,Ua as fe,Va as ue,Wa as Ce,Xa as xe,Ya as he,Za as Me,_a as De,aa as Z,ab as ve,bb as be,cb as Pe,db as ye,ea as ee,eb as Be,ha as te,hb as Oe,ia as ne,jb as Fe,la as ie,lb as Ee,ma as T,oa as L,qa as oe,r as q,ra as ae,rb as Se,sa as re,sb as I,t as k,ta as le,ua as se,w as A,wa as me,x as G,xa as de,ya as ce}from"./chunk-DMRUWG6L.js";import{$b as N,Ab as _,Bb as x,Ca as O,Cb as h,Eb as w,Hb as M,Hc as H,Jb as p,Jc as S,Mc as z,Pc as j,Qc as P,Rb as F,Sb as m,Ub as g,Wa as i,Zb as v,bc as b,cc as E,fa as f,fc as U,gc as $,ka as D,nb as c,pb as s,qb as V,t as R,ta as u,ua as C,yb as o,zb as a}from"./chunk-UIILES4X.js";import{e as B}from"./chunk-DVOCWXDE.js";var $e=(()=>{class e{constructor(){this.emitLoading=new O,this.loading=!1,this.formBuilder=f(X),this.deleteBetsUseCase=f(y),this.deleteBetForm=this.formBuilder.group({startDate:[null,[k.required]],endDate:[null,[k.required]]})}updateList(){this.emitLoading.emit(!0),this.loading=!0;let{startDate:t,endDate:l}=this.deleteBetForm.getRawValue()||{},n=new Date(t);n.setHours(0,0,0,0);let d=new Date(l);d.setHours(0,0,0,0),this.deleteBetsUseCase.updateList$({startDate:n,endDate:d}),this.deleteBetForm.reset()}static{this.\u0275fac=function(l){return new(l||e)}}static{this.\u0275cmp=D({type:e,selectors:[["app-delete-bets-form"]],inputs:{loading:"loading"},outputs:{emitLoading:"emitLoading"},standalone:!0,features:[v],decls:19,vars:5,consts:[["picker",""],[1,"form-container"],[1,"form-card"],[1,"deleteBets-form",3,"formGroup"],[3,"rangePicker"],["matStartDate","","placeholder","Fecha inicio","formControlName","startDate","name","startDate","required",""],["matEndDate","","placeholder","Fecha Fin","formControlName","endDate","name","endDate","required",""],["matIconSuffix","",3,"for"],[1,"button-group"],["mat-raised-button","","color","primary","type","button",3,"click","disabled"]],template:function(l,n){if(l&1){let d=w();o(0,"div",1)(1,"mat-card",2)(2,"mat-card-header")(3,"mat-card-title"),m(4,"Filtros"),a()(),o(5,"mat-card-content")(6,"form",3)(7,"mat-form-field")(8,"mat-label"),m(9,"Escoge una fecha"),a(),o(10,"mat-date-range-input",4),_(11,"input",5)(12,"input",6),a(),_(13,"mat-datepicker-toggle",7)(14,"mat-date-range-picker",null,0),a(),o(16,"div",8)(17,"button",9),M("click",function(){return u(d),C(n.updateList())}),m(18),a()()()()()()}if(l&2){let d=F(15);i(6),s("formGroup",n.deleteBetForm),i(4),s("rangePicker",d),i(3),s("for",d),i(4),s("disabled",!n.deleteBetForm.valid||n.loading),i(),g(" ",n.loading?"Cargando...":"Cargar apuestas a eliminar"," ")}},dependencies:[P,Y,J,q,A,G,W,K,Q,Ne,Le,Re,Ie,ke,Ve,ne,te,Z,ee,ie,Oe,L,T,me,ae,le,se,re],styles:[".form-container[_ngcontent-%COMP%]{display:flex;justify-content:center;align-items:flex-start;padding:24px;height:fit-content}.form-card[_ngcontent-%COMP%]{width:100%;max-width:420px;padding:32px 28px 24px;border-radius:16px;box-shadow:0 2px 16px #00000014}.form-card[_ngcontent-%COMP%]   mat-card-header[_ngcontent-%COMP%]{margin-bottom:18px;text-align:center}.form-card[_ngcontent-%COMP%]   mat-card-header[_ngcontent-%COMP%]   mat-card-title[_ngcontent-%COMP%]{font-size:24px;font-weight:600;color:#222;margin:0}.deleteBets-form[_ngcontent-%COMP%]{display:flex;flex-direction:column;gap:18px}.deleteBets-form[_ngcontent-%COMP%]   mat-form-field[_ngcontent-%COMP%]{width:100%;margin-bottom:0}.deleteBets-form[_ngcontent-%COMP%]   mat-form-field[_ngcontent-%COMP%]   .mat-mdc-text-field-wrapper[_ngcontent-%COMP%]{border-radius:6px}.button-group[_ngcontent-%COMP%]{display:flex;gap:12px;justify-content:center;margin-top:18px}.button-group[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]{min-width:110px;height:40px;border-radius:6px;font-weight:500;font-size:15px}.button-group[_ngcontent-%COMP%]   button[color=primary][_ngcontent-%COMP%]:disabled{background:#ccc;color:#999}mat-date-range-input[_ngcontent-%COMP%]{width:100%}mat-form-field[_ngcontent-%COMP%]{width:100%}@media (max-width: 768px){.form-container[_ngcontent-%COMP%]{padding:8px}.form-card[_ngcontent-%COMP%]{padding:12px;max-width:100%}.button-group[_ngcontent-%COMP%]{flex-direction:column}.button-group[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]{width:100%}}@media (min-width: 1025px){.form-container[_ngcontent-%COMP%]{padding:0;height:auto}.form-card[_ngcontent-%COMP%]{max-width:420px}}"]})}}return e})();var je=e=>({"text-warning":e});function qe(e,r){e&1&&(o(0,"th",15),m(1,"Loter\xEDa"),a())}function Ae(e,r){if(e&1&&(o(0,"td",16),m(1),a()),e&2){let t=r.$implicit;i(),g(" ",t.lottery.name," ")}}function Ge(e,r){if(e&1&&(o(0,"td",17)(1,"span",18),m(2),a()()),e&2){let t=p(3);i(2),g("",t.totalMissing," m\xE1s...")}}function Je(e,r){e&1&&(o(0,"th",15),m(1,"N\xFAmero"),a())}function Ke(e,r){if(e&1&&(o(0,"td",16),m(1),a()),e&2){let t=r.$implicit;i(),g(" ",t.lotteryNumber," ")}}function Qe(e,r){e&1&&_(0,"td",17)}function We(e,r){e&1&&(o(0,"th",15),m(1,"Combinado"),a())}function Xe(e,r){if(e&1&&(o(0,"td",16),m(1),a()),e&2){let t=r.$implicit;i(),g(" ",t.combined?"SI":"NO"," ")}}function Ye(e,r){e&1&&_(0,"td",17)}function Ze(e,r){e&1&&(o(0,"th",15),m(1,"Valor"),a())}function et(e,r){if(e&1&&(o(0,"td",19)(1,"span",20),m(2),b(3,"currency"),a()()),e&2){let t=r.$implicit;i(),s("ngClass",N(7,je,t.warning)),i(),g(" ",U(3,2,t.value,"COP","symbol-narrow","1.0-0")," ")}}function tt(e,r){e&1&&_(0,"td",17)}function nt(e,r){e&1&&_(0,"tr",21)}function it(e,r){e&1&&_(0,"tr",22)}function ot(e,r){e&1&&_(0,"tr",24)}function at(e,r){if(e&1&&(x(0),c(1,ot,1,0,"tr",23),h()),e&2){let t=p(3);i(),s("matFooterRowDef",t.displayedColumns)("matFooterRowDefSticky",!0)}}function rt(e,r){if(e&1&&(x(0),o(1,"table",4),x(2,5),c(3,qe,2,0,"th",6)(4,Ae,2,1,"td",7)(5,Ge,3,1,"td",8),h(),x(6,9),c(7,Je,2,0,"th",6)(8,Ke,2,1,"td",7)(9,Qe,1,0,"td",8),h(),x(10,10),c(11,We,2,0,"th",6)(12,Xe,2,1,"td",7)(13,Ye,1,0,"td",8),h(),x(14,11),c(15,Ze,2,0,"th",6)(16,et,4,9,"td",12)(17,tt,1,0,"td",8),h(),c(18,nt,1,0,"tr",13)(19,it,1,0,"tr",14)(20,at,2,2,"ng-container",2),a(),h()),e&2){let t=p(2);i(),s("dataSource",t.listBets),i(17),s("matHeaderRowDef",t.displayedColumns),i(),s("matRowDefColumns",t.displayedColumns),i(),s("ngIf",t.listBets.length>0&&t.totalMissing>0)}}function lt(e,r){e&1&&(o(0,"div",25)(1,"p"),m(2,"No hay resultados disponibles para los filtros seleccionados."),a()())}function st(e,r){if(e&1&&(o(0,"div"),c(1,rt,21,4,"ng-container",2)(2,lt,3,0,"div",3),a()),e&2){let t=p();i(),s("ngIf",!t.loading),i(),s("ngIf",t.listBets.length===0)}}function mt(e,r){e&1&&(o(0,"div",26),_(1,"mat-progress-spinner",27),o(2,"p"),m(3,"Cargando datos..."),a()())}var He=(()=>{class e{constructor(){this.emitLoading=new O,this.emitData=new O,this.deleteBetsUseCase=f(y),this.notification=f(I),this.listBets=[],this.totalMissing=0,this.loading=!1,this.displayedColumns=["lottery","lotteryNumber","combined","value"],this.view="list"}ngOnInit(){this.deleteBetsUseCase.listBets$()?.subscribe(t=>{t&&this.getData(t.startDate,t.endDate)})}ngOnDestroy(){this.deleteBetsUseCase.updateList$(null)}getData(t,l){return B(this,null,function*(){this.loading=!0;try{let{data:n,total:d}=yield this.deleteBetsUseCase.getByDate(t,l);this.listBets=n,this.totalMissing=d-n.length,this.emitLoading.emit(!1),this.emitData.emit(this.listBets.length>0)}catch(n){console.error("Error fetching register bets:",n),this.notification.error(n?.message||"Error al cargar los registros de apuestas")}finally{this.loading=!1}})}static{this.\u0275fac=function(l){return new(l||e)}}static{this.\u0275cmp=D({type:e,selectors:[["app-delete-bets-list"]],outputs:{emitLoading:"emitLoading",emitData:"emitData"},standalone:!0,features:[v],decls:3,vars:2,consts:[["loadingTpl",""],[4,"ngIf","ngIfElse"],[4,"ngIf"],["class","empty-state",4,"ngIf"],["mat-table","",1,"mat-elevation-z8",3,"dataSource"],["matColumnDef","lottery"],["mat-header-cell","",4,"matHeaderCellDef"],["mat-cell","",4,"matCellDef"],["mat-footer-cell","",4,"matFooterCellDef"],["matColumnDef","lotteryNumber"],["matColumnDef","combined"],["matColumnDef","value"],["mat-cell","","style","text-align: right",4,"matCellDef"],["mat-header-row","",4,"matHeaderRowDef"],["mat-row","","class","table-row",4,"matRowDef","matRowDefColumns"],["mat-header-cell",""],["mat-cell",""],["mat-footer-cell",""],[2,"font-weight","bold"],["mat-cell","",2,"text-align","right"],[3,"ngClass"],["mat-header-row",""],["mat-row","",1,"table-row"],["mat-footer-row","",4,"matFooterRowDef","matFooterRowDefSticky"],["mat-footer-row",""],[1,"empty-state"],[1,"loading-container"],["mode","indeterminate","diameter","50"]],template:function(l,n){if(l&1&&c(0,st,3,2,"div",1)(1,mt,4,0,"ng-template",null,0,$),l&2){let d=F(2);s("ngIf",!n.loading)("ngIfElse",d)}},dependencies:[Be,_e,fe,De,Ce,ge,ve,ue,we,xe,Me,he,be,ye,Pe,Fe,L,P,H,S,j,oe,pe,ce,de],styles:[".table-wrapper[_ngcontent-%COMP%]{max-height:400px;overflow:auto;border:1px solid #e0e0e0;border-radius:4px}.table-wrapper[_ngcontent-%COMP%]   table[_ngcontent-%COMP%]{width:max-content;min-width:100%}.table-wrapper[_ngcontent-%COMP%]   .mat-header-row[_ngcontent-%COMP%], .table-wrapper[_ngcontent-%COMP%]   .mat-row[_ngcontent-%COMP%]{white-space:nowrap}.empty-state[_ngcontent-%COMP%]{text-align:center;margin-top:16px;color:#000;font-size:14px}.loading-container[_ngcontent-%COMP%]{display:flex;flex-direction:column;align-items:center;margin:40px 0;color:#555}.loading-container[_ngcontent-%COMP%]   mat-progress-spinner[_ngcontent-%COMP%]{margin-bottom:16px}"]})}}return e})();function dt(e,r){if(e&1&&(o(0,"div",2)(1,"div",3),m(2),b(3,"async"),a(),o(4,"div",4),_(5,"div",5),b(6,"async"),a()()),e&2){let t=p();i(2),g("Eliminando... ",E(3,3,t.deleteProgress$),"%"),i(3),V("width",E(6,5,t.deleteProgress$),"%")}}function ct(e,r){if(e&1){let t=w();o(0,"button",14),M("click",function(){u(t);let n=p(2);return C(n.deleteValidate())}),m(1," Eliminar "),a()}}function pt(e,r){if(e&1){let t=w();o(0,"div",15)(1,"app-delete-bets-form",16),M("emitLoading",function(n){u(t);let d=p(2);return C(d.loadingForm=n)}),a()()}if(e&2){let t=p(2);i(),s("loading",t.loadingForm)}}function _t(e,r){if(e&1){let t=w();o(0,"div",6)(1,"div",7)(2,"button",8),M("click",function(){u(t);let n=p();return C(n.toggleForm())}),m(3),a(),c(4,ct,2,0,"button",9),a(),o(5,"div",10),c(6,pt,2,1,"div",11),o(7,"div",12)(8,"app-delete-bets-list",13),M("emitLoading",function(n){u(t);let d=p();return C(d.loadingForm=n)})("emitData",function(n){u(t);let d=p();return C(d.hasData=n)}),a()()()()}if(e&2){let t=p();i(3),g(" ",t.showForm?"Ocultar formulario":"Filtros"," "),i(),s("ngIf",t.hasData),i(2),s("ngIf",t.showForm)}}var dn=(()=>{class e{constructor(){this.deleteBetsUseCase=f(y),this.notification=f(I),this.dialog=f(Ee),this.deleteProgress$=this.deleteBetsUseCase.deleteProgress$(),this.showForm=!1,this.isMobile=!1,this.loading=!1,this.loadingForm=!1,this.hasData=!1}ngOnInit(){this.deleteBetsUseCase.listBets$()?.subscribe(t=>{t&&(this.startDate=t.startDate,this.endDate=t.endDate)})}toggleForm(){this.showForm=!this.showForm}deleteValidate(){return B(this,null,function*(){let t=this.dialog.open(Te,{data:{title:"Eliminar masivamente registros de apuestas",message:"\xBFEst\xE1 seguro que desea eliminar esto(s) registros?"}});(yield R(t.afterClosed()))&&this.deleteData()})}deleteData(){return B(this,null,function*(){this.loading=!0;try{yield this.deleteBetsUseCase.bulkDelete(this.startDate,this.endDate),this.notification.success("Registros eliminados satisfactoriamente!!"),this.deleteBetsUseCase.updateList$({startDate:this.startDate,endDate:this.endDate})}catch(t){console.error("Error fetching register bets:",t),this.notification.error(t?.message||"Error al cargar los registros de apuestas")}finally{this.loading=!1}})}static{this.\u0275fac=function(l){return new(l||e)}}static{this.\u0275cmp=D({type:e,selectors:[["app-delete-bets"]],standalone:!0,features:[v],decls:3,vars:4,consts:[["class","loader-screen",4,"ngIf"],["class","alert-layout",4,"ngIf"],[1,"loader-screen"],[1,"loader-text"],[1,"progress-bar"],[1,"progress-fill"],[1,"alert-layout"],[1,"toolbar"],["mat-raised-button","","color","primary",3,"click"],["mat-raised-button","","color","warn",3,"click",4,"ngIf"],[1,"layout"],["class","form-section",4,"ngIf"],[1,"table-section"],[3,"emitLoading","emitData"],["mat-raised-button","","color","warn",3,"click"],[1,"form-section"],[3,"emitLoading","loading"]],template:function(l,n){l&1&&(c(0,dt,7,7,"div",0),b(1,"async"),c(2,_t,9,3,"div",1)),l&2&&(s("ngIf",E(1,2,n.deleteProgress$)<100&&n.loading),i(2),s("ngIf",!n.loading))},dependencies:[$e,He,P,S,z,T,Se],styles:['@charset "UTF-8";.loader-screen[_ngcontent-%COMP%]{position:fixed;top:0;left:0;width:100vw;height:100vh;background-color:#fff;z-index:9999;display:flex;flex-direction:column;justify-content:center;align-items:center;color:#000;padding:20px;box-sizing:border-box}.loader-screen[_ngcontent-%COMP%]   .loader-text[_ngcontent-%COMP%]{font-size:24px;margin-bottom:20px;text-align:center}@media (max-width: 480px){.loader-screen[_ngcontent-%COMP%]   .loader-text[_ngcontent-%COMP%]{font-size:18px}}.loader-screen[_ngcontent-%COMP%]   .progress-bar[_ngcontent-%COMP%]{width:80%;max-width:400px;height:20px;background-color:#ccc;border-radius:10px;overflow:hidden}@media (max-width: 480px){.loader-screen[_ngcontent-%COMP%]   .progress-bar[_ngcontent-%COMP%]{height:16px}}.loader-screen[_ngcontent-%COMP%]   .progress-fill[_ngcontent-%COMP%]{height:100%;background-color:#0d47a1;transition:width .2s linear}.alert-layout[_ngcontent-%COMP%]{padding:20px}@media (max-width: 768px){.alert-layout[_ngcontent-%COMP%]{padding:16px}}.toolbar[_ngcontent-%COMP%]{padding:0 0 20px;display:flex;flex-wrap:wrap;gap:10px}.toolbar[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]{white-space:nowrap}.layout[_ngcontent-%COMP%]{display:flex;gap:24px;min-height:60vh;box-sizing:border-box}@media (max-width: 768px){.layout[_ngcontent-%COMP%]{flex-direction:column;gap:16px}}.form-section[_ngcontent-%COMP%]{flex:0 0 350px;min-width:300px}@media (max-width: 768px){.form-section[_ngcontent-%COMP%]{width:100%;flex:none}}.table-section[_ngcontent-%COMP%]{flex:1;min-width:0}@media (max-width: 768px){.table-section[_ngcontent-%COMP%]{width:100%}}.no-data-row[_ngcontent-%COMP%]{text-align:center}.no-data-row[_ngcontent-%COMP%]   td[_ngcontent-%COMP%]{text-align:center;font-style:italic;color:gray;padding:20px}']})}}return e})();export{dn as DeleteBetsPage};
