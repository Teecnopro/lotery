import{a as N,b as z,c as R,d as $,e as H,f as j,h as Q,j as re}from"./chunk-VMCPYYGU.js";import"./chunk-Q6XXSMRI.js";import"./chunk-5RECUNLU.js";import{a as me}from"./chunk-A5LTIFC2.js";import"./chunk-FMBXTAWF.js";import{a as se,c as le}from"./chunk-DZLUVXQM.js";import{a as ae,b as C}from"./chunk-2NXNVONS.js";import{b as oe}from"./chunk-2BKWH26S.js";import"./chunk-WRDK3TEQ.js";import{Aa as W,Ba as X,Ca as Y,Da as Z,Ea as ee,Fa as te,Na as ie,P as G,Q as q,na as K,pa as J,sb as ne}from"./chunk-ANDZIBJU.js";import{Ab as L,D as k,Eb as b,Hb as f,Jb as x,Jc as B,Nc as V,Ob as w,Pb as A,Qb as I,Qc as F,Rb as T,Sb as r,Tb as c,W as h,Wa as l,Yb as U,Zb as E,_b as D,cc as _,dc as v,f as M,fa as s,ka as S,nb as P,pb as g,ta as u,u as d,ua as p,w as O,yb as i,zb as o}from"./chunk-75LTUFHW.js";import{e as y}from"./chunk-DVOCWXDE.js";var ce=[{label:"Inicio",icon:"home",route:"/dashboard",onlyAdmin:!1},{label:"Usuarios",icon:"people",route:"users",onlyAdmin:!0},{label:"Parametrizaci\xF3n de alertas",icon:"add_alert",route:"alert-parameterization",onlyAdmin:!0},{label:"Parametrizaci\xF3n de pagos",icon:"payments",route:"payment-parameterization",onlyAdmin:!0},{label:"Registrar apuestas",icon:"casino",route:"register-bets",onlyAdmin:!1},{label:"Vendedores",icon:"store",route:"vendors",onlyAdmin:!0},{label:"Consultar aciertos",icon:"check_circle",route:"check-hits",onlyAdmin:!1},{label:"Reportes",icon:"dashboard_2",route:"reports",onlyAdmin:!0},{label:"Bitacora",icon:"book",route:"logbook",onlyAdmin:!0}];var pe=["sidenav"],ge=()=>({exact:!0});function fe(a,de){if(a&1){let e=b();i(0,"a",14),f("click",function(){u(e),x();let n=T(2);return p(n.close())}),i(1,"mat-icon",15),r(2),o(),i(3,"span",16),r(4),o()()}if(a&2){let e=de.$implicit;g("routerLink",e.route)("routerLinkActiveOptions",D(5,ge))("matTooltip",e.label),l(2),c(e.icon),l(2),c(e.label)}}var $e=(()=>{class a{constructor(){this.breakpointObserver=s(G),this.router=s($),this.route=s(z),this.destroy$=new M,this.authSession=s(oe),this.logoutUseCase=s(re),this.LogBookUseCases=s(C),this.title="",this.menuItems=ce,this.currentUserName="Invitado",this.isHandset=this.breakpointObserver.observe(q.Handset).pipe(d(e=>e?.matches),h(this.destroy$)),this.router.events.pipe(k(e=>e instanceof N),d(()=>this.route),d(e=>{for(;e.firstChild;)e=e.firstChild;return e}),O(e=>e?.data),h(this.destroy$)).subscribe(e=>{this.title=e.title??"Inicio"})}ngOnInit(){let e=this.authSession.getUser(),t=e?.name,n=e?.email;this.currentUserName=t||n?.split("@")?.[0]}ngOnDestroy(){this.destroy$.next(),this.destroy$.complete()}visibleMenuItems(){let e=this.authSession.getUser()?.isAdmin;return this.menuItems.filter(t=>this.router.url!==t.route&&(!t.onlyAdmin||e))}toggleMenu(){this.sidenav.toggle()}logout(){return y(this,null,function*(){let e=this.authSession.getUser();yield this.logoutUseCase.execute().then(()=>{this.LogBookUseCases.createLogBook({date:new Date().valueOf(),action:se.LOGOUT,user:e,module:le.AUTH,description:`Usuario ${e?.name} cerr\xF3 sesi\xF3n`})}),this.router.navigate(["/auth/login"])})}static{this.\u0275fac=function(t){return new(t||a)}}static{this.\u0275cmp=S({type:a,selectors:[["app-dashboard-layout"]],viewQuery:function(t,n){if(t&1&&w(pe,5),t&2){let m;A(m=I())&&(n.sidenav=m.first)}},standalone:!0,features:[U([{provide:ae,useClass:me},C]),E],decls:27,vars:9,consts:[["sidenav",""],[1,"sidenav-container"],[1,"sidebar",3,"mode","opened"],[1,"sidebar-wrapper"],[1,"sidebar-menu"],["mat-list-item","","routerLinkActive","active","matTooltipPosition","right","matTooltipShowDelay","500",3,"routerLink","routerLinkActiveOptions","matTooltip","click",4,"ngFor","ngForOf"],[1,"user-footer"],[1,"user-info"],["mat-icon-button","","matTooltip","Cerrar sesi\xF3n","color","warn",3,"click"],[1,"content-area"],["color","primary"],["mat-icon-button","",3,"click"],[1,"toolbar-title"],[1,"main-content"],["mat-list-item","","routerLinkActive","active","matTooltipPosition","right","matTooltipShowDelay","500",3,"click","routerLink","routerLinkActiveOptions","matTooltip"],["matListIcon",""],["matLine",""]],template:function(t,n){if(t&1){let m=b();i(0,"mat-sidenav-container",1)(1,"mat-sidenav",2,0),_(3,"async"),_(4,"async"),i(5,"div",3)(6,"div",4)(7,"mat-nav-list"),P(8,fe,5,6,"a",5),o()(),i(9,"div",6)(10,"div",7)(11,"mat-icon"),r(12,"account_circle"),o(),i(13,"span"),r(14),o()(),i(15,"button",8),f("click",function(){return u(m),p(n.logout())}),i(16,"mat-icon"),r(17,"logout"),o()()()()(),i(18,"mat-sidenav-content",9)(19,"mat-toolbar",10)(20,"button",11),f("click",function(){return u(m),p(n.toggleMenu())}),i(21,"mat-icon"),r(22,"menu"),o()(),i(23,"span",12),r(24),o()(),i(25,"main",13),L(26,"router-outlet"),o()()()}t&2&&(l(),g("mode",v(3,5,n.isHandset)?"over":"side")("opened",!v(4,7,n.isHandset)),l(7),g("ngForOf",n.visibleMenuItems()),l(6),c(n.currentUserName),l(10),c(n.title))},dependencies:[F,B,V,Q,R,H,j,ne,K,J,X,Y,W,Z,te,ee,ie],styles:[".sidenav-container[_ngcontent-%COMP%]{height:100vh}.sidebar-wrapper[_ngcontent-%COMP%]{display:flex;flex-direction:column;height:100%}.sidebar[_ngcontent-%COMP%]{display:flex;flex-direction:column;width:220px;height:100vh;background-color:#fff;border-right:1px solid #e0e0e0;padding-top:1rem}.sidebar[_ngcontent-%COMP%]   mat-icon[_ngcontent-%COMP%]{margin-right:8px;color:#1976d2}.sidebar[_ngcontent-%COMP%]   a.active[_ngcontent-%COMP%]{background-color:#e3f2fd;color:#1976d2;font-weight:700}.sidebar-menu[_ngcontent-%COMP%]{flex:1;overflow-y:auto}.sidebar[_ngcontent-%COMP%]   a.mat-list-item[_ngcontent-%COMP%]{display:flex;align-items:center;gap:8px;height:48px}.sidebar[_ngcontent-%COMP%]   a.mat-list-item[_ngcontent-%COMP%]   span.menu-label[_ngcontent-%COMP%]{flex:1;min-width:0}.sidebar[_ngcontent-%COMP%]   a[_ngcontent-%COMP%]   mat-icon[_ngcontent-%COMP%]{font-size:20px;vertical-align:middle}.sidebar[_ngcontent-%COMP%]   a[_ngcontent-%COMP%]{font-weight:500;color:#333}.sidebar[_ngcontent-%COMP%]   a.active[_ngcontent-%COMP%]{background-color:#e3f2fd;color:#1976d2}.content-area[_ngcontent-%COMP%]{background-color:#f4f6f8;height:100%}.main-content[_ngcontent-%COMP%]{padding:1.5rem}mat-toolbar[_ngcontent-%COMP%]{display:flex;justify-content:start;gap:1rem}.toolbar-title[_ngcontent-%COMP%]{font-weight:500;font-size:1.2rem}.user-footer[_ngcontent-%COMP%]{display:flex;align-items:center;justify-content:space-between;padding:.75rem 1rem;border-top:1px solid #ddd;font-size:.9rem;color:#555}.user-info[_ngcontent-%COMP%]{display:flex;align-items:center;gap:.5rem}"]})}}return a})();export{$e as DashboardLayoutComponent};
