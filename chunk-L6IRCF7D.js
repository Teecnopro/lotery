import{c as Pe,d as Be,e as ve,f as we,g as Oe,h as Se}from"./chunk-NU3SRIYC.js";import{b as M}from"./chunk-6E5G53ZK.js";import{A,Aa as F,C as G,Ca as E,D as J,Ea as ne,F as K,Fa as ie,G as Q,Ga as oe,Ha as ae,I as W,Ia as re,Ka as le,ab as se,bb as me,cb as de,db as ce,fb as pe,gb as fe,ib as ue,jb as ge,lb as _e,mb as Ce,oa as X,ob as he,pb as xe,r as z,sa as Y,sb as Me,t as T,va as Z,vb as De,w as j,wa as ee,wb as be,x as q,xb as ye,yb as I,za as te}from"./chunk-KWAI636N.js";import{$b as R,Ab as c,Bb as y,Cb as P,Eb as B,Hb as v,Hc as U,Jb as u,Jc as S,Mc as $,Pc as H,Qc as x,Rb as L,Sb as m,Tb as N,Ub as g,Wa as a,Zb as C,bc as h,cc as O,fa as f,fc as V,ka as _,nb as d,pb as s,rb as k,ta as D,ua as b,yb as n,zb as i}from"./chunk-UIILES4X.js";import{e as w}from"./chunk-DVOCWXDE.js";var Ee=(()=>{class e{constructor(){this.formBuilder=f(Q),this.deleteBetsUseCase=f(M),this.deleteBetForm=this.formBuilder.group({startDate:[null,[T.required]],endDate:[null,[T.required]]})}updateList(){let{startDate:t,endDate:r}=this.deleteBetForm.getRawValue()||{},o=new Date(t);o.setHours(0,0,0,0);let p=new Date(r);p.setHours(0,0,0,0),this.deleteBetsUseCase.updateList$({startDate:o,endDate:p})}static{this.\u0275fac=function(r){return new(r||e)}}static{this.\u0275cmp=_({type:e,selectors:[["app-delete-bets-form"]],standalone:!0,features:[C],decls:19,vars:4,consts:[["picker",""],[1,"form-container"],[1,"form-card"],[1,"deleteBets-form",3,"formGroup"],[3,"rangePicker"],["matStartDate","","placeholder","Fecha inicio","formControlName","startDate","name","startDate","required",""],["matEndDate","","placeholder","Fecha Fin","formControlName","endDate","name","endDate","required",""],["matIconSuffix","",3,"for"],[1,"button-group"],["mat-raised-button","","color","primary","type","button",3,"click","disabled"]],template:function(r,o){if(r&1){let p=B();n(0,"div",1)(1,"mat-card",2)(2,"mat-card-header")(3,"mat-card-title"),m(4,"Filtros"),i()(),n(5,"mat-card-content")(6,"form",3)(7,"mat-form-field")(8,"mat-label"),m(9,"Escoge una fecha"),i(),n(10,"mat-date-range-input",4),c(11,"input",5)(12,"input",6),i(),c(13,"mat-datepicker-toggle",7)(14,"mat-date-range-picker",null,0),i(),n(16,"div",8)(17,"button",9),v("click",function(){return D(p),b(o.updateList())}),m(18," Consultar apuestas a eliminar "),i()()()()()()}if(r&2){let p=L(15);a(6),s("formGroup",o.deleteBetForm),a(4),s("rangePicker",p),a(3),s("for",p),a(4),s("disabled",!o.deleteBetForm.valid)}},dependencies:[x,W,A,z,j,q,K,G,J,Se,Pe,we,Be,ve,Oe,ee,Z,X,Y,te,Me,E,F,le,ie,ae,re,oe],styles:[".form-container[_ngcontent-%COMP%]{display:flex;justify-content:center;align-items:flex-start;padding:24px;height:fit-content}.form-card[_ngcontent-%COMP%]{width:100%;max-width:420px;padding:32px 28px 24px;border-radius:16px;box-shadow:0 2px 16px #00000014}.form-card[_ngcontent-%COMP%]   mat-card-header[_ngcontent-%COMP%]{margin-bottom:18px;text-align:center}.form-card[_ngcontent-%COMP%]   mat-card-header[_ngcontent-%COMP%]   mat-card-title[_ngcontent-%COMP%]{font-size:24px;font-weight:600;color:#222;margin:0}.deleteBets-form[_ngcontent-%COMP%]{display:flex;flex-direction:column;gap:18px}.deleteBets-form[_ngcontent-%COMP%]   mat-form-field[_ngcontent-%COMP%]{width:100%;margin-bottom:0}.deleteBets-form[_ngcontent-%COMP%]   mat-form-field[_ngcontent-%COMP%]   .mat-mdc-text-field-wrapper[_ngcontent-%COMP%]{border-radius:6px}.button-group[_ngcontent-%COMP%]{display:flex;gap:12px;justify-content:center;margin-top:18px}.button-group[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]{min-width:110px;height:40px;border-radius:6px;font-weight:500;font-size:15px}.button-group[_ngcontent-%COMP%]   button[color=primary][_ngcontent-%COMP%]:disabled{background:#ccc;color:#999}mat-date-range-input[_ngcontent-%COMP%]{width:100%}mat-form-field[_ngcontent-%COMP%]{width:100%}@media (max-width: 768px){.form-container[_ngcontent-%COMP%]{padding:8px}.form-card[_ngcontent-%COMP%]{padding:12px;max-width:100%}.button-group[_ngcontent-%COMP%]{flex-direction:column}.button-group[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]{width:100%}}@media (min-width: 1025px){.form-container[_ngcontent-%COMP%]{padding:0;height:auto}.form-card[_ngcontent-%COMP%]{max-width:420px}}"]})}}return e})();var ke=e=>({"text-warning":e});function Le(e,l){e&1&&(n(0,"div",2)(1,"p"),m(2,"Cargando registros a eliminar..."),i()())}function Ne(e,l){e&1&&(n(0,"th",13),m(1,"Loter\xEDa"),i())}function Re(e,l){if(e&1&&(n(0,"td",14),m(1),i()),e&2){let t=l.$implicit;a(),g(" ",t.lottery.name," ")}}function Ve(e,l){e&1&&(n(0,"th",13),m(1,"N\xFAmero"),i())}function Ue(e,l){if(e&1&&(n(0,"td",14),m(1),i()),e&2){let t=l.$implicit;a(),g(" ",t.lotteryNumber," ")}}function $e(e,l){e&1&&(n(0,"th",13),m(1,"Combinado"),i())}function He(e,l){if(e&1&&(n(0,"td",14),m(1),i()),e&2){let t=l.$implicit;a(),g(" ",t.combined?"SI":"NO"," ")}}function ze(e,l){e&1&&(n(0,"th",13),m(1,"Valor"),i())}function je(e,l){if(e&1&&(n(0,"td",15)(1,"span",16),m(2),h(3,"currency"),i()()),e&2){let t=l.$implicit;a(),s("ngClass",R(7,ke,t.warning)),a(),N(V(3,2,t.value,"COP","symbol-narrow","1.0-0"))}}function qe(e,l){e&1&&c(0,"tr",17)}function Ae(e,l){e&1&&c(0,"tr",18)}function Ge(e,l){if(e&1&&(n(0,"table",3),y(1,4),d(2,Ne,2,0,"th",5)(3,Re,2,1,"td",6),P(),y(4,7),d(5,Ve,2,0,"th",5)(6,Ue,2,1,"td",6),P(),y(7,8),d(8,$e,2,0,"th",5)(9,He,2,1,"td",6),P(),y(10,9),d(11,ze,2,0,"th",5)(12,je,4,9,"td",10),P(),d(13,qe,1,0,"tr",11)(14,Ae,1,0,"tr",12),i()),e&2){let t=u();s("dataSource",t.listBets),a(13),s("matHeaderRowDef",t.displayedColumns),a(),s("matRowDefColumns",t.displayedColumns)}}var Ie=(()=>{class e{constructor(){this.deleteBetsUseCase=f(M),this.notification=f(I),this.listBets=[],this.totalMissing=0,this.loading=!1,this.displayedColumns=["lottery","lotteryNumber","combined","value"],this.view="list"}ngOnInit(){this.deleteBetsUseCase.listBets$()?.subscribe(t=>{t&&this.getData(t.startDate,t.endDate)})}getData(t,r){return w(this,null,function*(){this.loading=!0;try{let{data:o,total:p}=yield this.deleteBetsUseCase.getByDate(t,r);this.listBets=o,this.totalMissing=p-o.length}catch(o){console.error("Error fetching register bets:",o),this.notification.error(o?.message||"Error al cargar los registros de apuestas")}finally{this.loading=!1}})}static{this.\u0275fac=function(r){return new(r||e)}}static{this.\u0275cmp=_({type:e,selectors:[["app-delete-bets-list"]],standalone:!0,features:[C],decls:3,vars:2,consts:[["class","loading-container",4,"ngIf"],["mat-table","","class","mat-elevation-z8",3,"dataSource",4,"ngIf"],[1,"loading-container"],["mat-table","",1,"mat-elevation-z8",3,"dataSource"],["matColumnDef","lottery"],["mat-header-cell","",4,"matHeaderCellDef"],["mat-cell","",4,"matCellDef"],["matColumnDef","lotteryNumber"],["matColumnDef","combined"],["matColumnDef","value"],["mat-cell","","style","text-align: right",4,"matCellDef"],["mat-header-row","",4,"matHeaderRowDef"],["mat-row","","class","table-row",4,"matRowDef","matRowDefColumns"],["mat-header-cell",""],["mat-cell",""],["mat-cell","",2,"text-align","right"],[3,"ngClass"],["mat-header-row",""],["mat-row","",1,"table-row"]],template:function(r,o){r&1&&(n(0,"div"),d(1,Le,3,0,"div",0)(2,Ge,15,3,"table",1),i()),r&2&&(a(),s("ngIf",o.loading),a(),s("ngIf",!o.loading))},dependencies:[xe,me,ce,ge,pe,de,_e,fe,ue,Ce,he,De,E,x,U,S,H,ne,se]})}}return e})();function Je(e,l){if(e&1&&(n(0,"div",2)(1,"div",3),c(2,"mat-progress-bar",4),h(3,"async"),n(4,"p"),m(5),h(6,"async"),i()()()),e&2){let t=u();a(2),s("value",O(3,2,t.deleteProgress$)),a(3),g("Eliminando... ",O(6,4,t.deleteProgress$),"%")}}function Ke(e,l){if(e&1){let t=B();n(0,"button",12),v("click",function(){D(t);let o=u(2);return b(o.deleteData())}),m(1," Eliminar "),i()}}function Qe(e,l){e&1&&(n(0,"div",13)(1,"div",13),c(2,"app-delete-bets-form"),i()())}function We(e,l){if(e&1){let t=B();n(0,"div",5)(1,"div",6)(2,"button",7),v("click",function(){D(t);let o=u();return b(o.toggleForm())}),m(3),i(),d(4,Ke,2,0,"button",8),i(),n(5,"div",9),d(6,Qe,3,0,"div",10),n(7,"div",11),c(8,"app-delete-bets-list"),i()()()}if(e&2){let t=u();a(3),g(" ",t.showForm?"Ocultar formulario":"Filtros"," "),a(),s("ngIf",t.startDate&&t.endDate),a(),k("column",t.isMobile),a(),s("ngIf",t.showForm)}}var Ut=(()=>{class e{constructor(){this.deleteBetsUseCase=f(M),this.notification=f(I),this.deleteProgress$=this.deleteBetsUseCase.deleteProgress$(),this.showForm=!1,this.isMobile=!1,this.loading=!1}ngOnInit(){this.deleteBetsUseCase.listBets$()?.subscribe(t=>{t&&(this.startDate=t.startDate,this.endDate=t.endDate)})}toggleForm(){this.showForm=!this.showForm}deleteData(){return w(this,null,function*(){this.loading=!0;try{yield this.deleteBetsUseCase.bulkDelete(this.startDate,this.endDate),this.notification.success("Registros eliminados satisfactoriamente!!"),this.deleteBetsUseCase.updateList$({startDate:this.startDate,endDate:this.endDate})}catch(t){console.error("Error fetching register bets:",t),this.notification.error(t?.message||"Error al cargar los registros de apuestas")}finally{this.loading=!1}})}static{this.\u0275fac=function(r){return new(r||e)}}static{this.\u0275cmp=_({type:e,selectors:[["app-delete-bets"]],standalone:!0,features:[C],decls:3,vars:4,consts:[["class","fullscreen-loader",4,"ngIf"],["class","alert-layout",4,"ngIf"],[1,"fullscreen-loader"],[1,"loader-content"],["color","primary","mode","determinate",3,"value"],[1,"alert-layout"],[1,"toolbar"],["mat-raised-button","","color","primary",3,"click"],["mat-raised-button","","color","warn",3,"click",4,"ngIf"],[1,"layout"],["class","form-section",4,"ngIf"],[1,"table-section"],["mat-raised-button","","color","warn",3,"click"],[1,"form-section"]],template:function(r,o){r&1&&(d(0,Je,7,6,"div",0),h(1,"async"),d(2,We,9,5,"div",1)),r&2&&(s("ngIf",O(1,2,o.deleteProgress$)<100&&o.loading),a(2),s("ngIf",!o.loading))},dependencies:[Ee,Ie,x,S,$,F,ye,be],styles:[".layout[_ngcontent-%COMP%]{display:flex;gap:24px;padding:20px;min-height:100vh;box-sizing:border-box}.layout.column[_ngcontent-%COMP%]{flex-direction:column}.layout.column[_ngcontent-%COMP%]   .form-section[_ngcontent-%COMP%], .layout.column[_ngcontent-%COMP%]   .table-section[_ngcontent-%COMP%]{width:100%;flex:none}.form-section[_ngcontent-%COMP%]{flex:0 0 350px;min-width:0}.table-section[_ngcontent-%COMP%]{flex:1;min-width:0}.toolbar[_ngcontent-%COMP%]{padding:16px 20px 0;gap:10px}.fullscreen-loader[_ngcontent-%COMP%]{position:fixed;top:0;left:0;width:100vw;height:100vh;background-color:#2196f3;z-index:9999;display:flex;justify-content:center;align-items:center}.fullscreen-loader[_ngcontent-%COMP%]   .loader-content[_ngcontent-%COMP%]{display:flex;flex-direction:column;align-items:center;gap:1rem;color:#000}.fullscreen-loader[_ngcontent-%COMP%]   .loader-content[_ngcontent-%COMP%]   p[_ngcontent-%COMP%]{margin:0;font-size:1.2rem;font-weight:600}"]})}}return e})();export{Ut as DeleteBetsPage};
