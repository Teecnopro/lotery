import{A as x,B as b,C as q,D as f,n as D,q as u,r as I,s as p,t as A,u as w,v as l,x as m,y as j,z as d}from"./chunk-FMBXTAWF.js";import{$ as B,ea as v}from"./chunk-75LTUFHW.js";import{a as n,c as R,e as a}from"./chunk-DVOCWXDE.js";var k=(()=>{class S{constructor(t){this.firestore=t}getAll(){return a(this,null,function*(){let t=u(this.firestore,"sellers");return(yield l(t)).docs.map(s=>n({id:s.id},s.data()))})}getById(t){return a(this,null,function*(){let e=p(this.firestore,"sellers",t),s=yield w(e);return s.exists()?n({id:s.id},s.data()):null})}findAll(){return a(this,null,function*(){let t=u(this.firestore,"sellers");return(yield l(t)).docs.map(s=>n({id:s.id},s.data()))})}findById(t){return a(this,null,function*(){let e=p(this.firestore,"sellers",t),s=yield w(e);return s.exists()?n({id:s.id},s.data()):null})}create(t){return a(this,null,function*(){let e=p(this.firestore,"sellers",t.uid);return yield x(e,t),t})}update(t,e){return a(this,null,function*(){let s=p(this.firestore,"sellers",t),r=R(e,[]);return yield q(s,r),e})}delete(t){return a(this,null,function*(){let e=p(this.firestore,"sellers",t);yield I(e)})}findBy(t,e){return a(this,null,function*(){let s=u(this.firestore,"sellers"),r=d(s,f(t,"==",e));return(yield l(r)).docs.map(o=>n({id:o.id},o.data()))})}getSellerByCode(t){return a(this,null,function*(){let e=u(this.firestore,"sellers"),s=d(e,f("code","==",t)),r=yield l(s);return r.empty?null:n({id:r.docs[0].id},r.docs[0].data())})}getSellersByCodeOrName(t){return a(this,null,function*(){let e=u(this.firestore,"sellers"),s=d(e,f("code",">=",t),f("code","<",t+"\uF8FF")),r=d(e,f("name",">=",t),f("name","<",t+"\uF8FF")),[h,o]=yield Promise.all([l(s),l(r)]),i=new Map;return h.docs.forEach(c=>i.set(c.id,n({id:c.id},c.data()))),o.docs.forEach(c=>i.set(c.id,n({id:c.id},c.data()))),Array.from(i.values())})}updateState(t,e){return a(this,null,function*(){let s=p(this.firestore,"sellers",t);yield q(s,{state:e});let r=yield w(s);if(!r.exists())throw new Error("Seller not found");return n({id:r.id},r.data())})}getSellerByPagination(t,e,s){return a(this,null,function*(){let r=u(this.firestore,"sellers"),h=t-1,o=[];if(s)for(let[i,c]of Object.entries(s))o.push(f(i,"==",c));if(o.push(j("createdAt","desc")),h===0){let i=d(r,...o,m(e));return(yield l(i)).docs.map(y=>n({uid:y.id},y.data()))}else{let i=d(r,...o,m(h*e)),y=(yield l(i)).docs;if(y.length<h*e)return[];let C=y[y.length-1],E=d(r,...o,b(C),m(e));return(yield l(E)).docs.map(g=>n({uid:g.id},g.data()))}})}getTotalItems(t){return a(this,null,function*(){let e=u(this.firestore,"sellers"),s=[];if(t)for(let[o,i]of Object.entries(t))s.push(f(o,"==",i));let r=d(e,...s);return(yield A(r)).data().count})}getSellersActive(){return a(this,null,function*(){let t=u(this.firestore,"sellers"),e=d(t,f("state","==",!0));return(yield l(e)).docs.map(r=>n({id:r.id},r.data()))})}static{this.\u0275fac=function(e){return new(e||S)(v(D))}}static{this.\u0275prov=B({token:S,factory:S.\u0275fac,providedIn:"root"})}}return S})();export{k as a};
