import{B as R,D as a,n as S,p as j,q as p,t as w,v as g,x as y,y as k,z as f}from"./chunk-GUTPSQLZ.js";import{$ as b,ea as B}from"./chunk-6FFU6YBW.js";import{a as h,e as l}from"./chunk-DVOCWXDE.js";var x=(()=>{class c{constructor(t){this.firestore=t}createLogBook(t){return l(this,null,function*(){let n=yield j(p(this.firestore,"logbooks"),t);return h({uid:n.id},t)})}listLogBooksByPagination(t,n,e){return l(this,null,function*(){let i=p(this.firestore,"logbooks"),u=n-1,o=[];if(e&&Object.keys(e).length>0)for(let s of Object.keys(e)){let d=e[s];s==="dateRangeStart"?o.push(a("date",">=",d)):s==="dateRangeEnd"?o.push(a("date","<=",d)):o.push(a(s,"==",d))}if(o.push(k("date","desc")),u===0){let s=f(i,...o,y(t));return(yield g(s)).docs.map(r=>h({uid:r.id},r.data()))}else{let s=f(i,...o,y(u*t)),r=(yield g(s)).docs;if(r.length<u*t)return[];let v=r[r.length-1],I=f(i,...o,R(v),y(t));return(yield g(I)).docs.map(m=>h({uid:m.id},m.data()))}})}getTotalLogBooks(t){return l(this,null,function*(){let n=p(this.firestore,"logbooks"),e=[];if(t&&Object.keys(t).length>0)for(let o of Object.keys(t)){let s=t[o];o==="dateRangeStart"?e.push(a("date",">=",s)):o==="dateRangeEnd"?e.push(a("date","<=",s)):e.push(a(o,"==",s))}e.push(k("date","desc"));let i=f(n,...e);return(yield w(i)).data().count})}static{this.\u0275fac=function(n){return new(n||c)(B(S))}}static{this.\u0275prov=b({token:c,factory:c.\u0275fac,providedIn:"root"})}}return c})();export{x as a};
